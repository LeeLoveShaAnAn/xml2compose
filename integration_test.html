<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è½¬æ¢å™¨é›†æˆæµ‹è¯•</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f8f9fa;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        .test-runner {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        .test-controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }
        .btn {
            background: linear-gradient(135deg, #007AFF, #0056CC);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 122, 255, 0.3);
        }
        .btn-secondary {
            background: linear-gradient(135deg, #6c757d, #495057);
        }
        .btn-success {
            background: linear-gradient(135deg, #28a745, #20c997);
        }
        .btn-danger {
            background: linear-gradient(135deg, #dc3545, #fd7e14);
        }
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
            margin: 20px 0;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #007AFF, #0056CC);
            width: 0%;
            transition: width 0.3s ease;
        }
        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        .result-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border-left: 4px solid #007AFF;
        }
        .result-card.success {
            border-left-color: #28a745;
        }
        .result-card.failed {
            border-left-color: #dc3545;
        }
        .result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        .result-title {
            font-size: 16px;
            font-weight: 600;
            color: #333;
        }
        .result-status {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
        }
        .status-success {
            background: #d4edda;
            color: #155724;
        }
        .status-failed {
            background: #f8d7da;
            color: #721c24;
        }
        .status-pending {
            background: #fff3cd;
            color: #856404;
        }
        .code-block {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 15px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 12px;
            line-height: 1.4;
            overflow-x: auto;
            margin: 10px 0;
            max-height: 300px;
            overflow-y: auto;
        }
        .xml-code {
            background: #fff8e1;
            border-color: #ffcc02;
        }
        .compose-code {
            background: #e8f5e8;
            border-color: #4caf50;
        }
        .error-code {
            background: #ffebee;
            border-color: #f44336;
            color: #c62828;
        }
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .stat-item {
            text-align: center;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .stat-number {
            font-size: 24px;
            font-weight: bold;
            color: #007AFF;
            margin-bottom: 5px;
        }
        .stat-label {
            font-size: 12px;
            color: #666;
            text-transform: uppercase;
        }
        .log-console {
            background: #1e1e1e;
            color: #d4d4d4;
            border-radius: 8px;
            padding: 15px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 12px;
            line-height: 1.4;
            max-height: 200px;
            overflow-y: auto;
            margin-top: 20px;
        }
        .log-entry {
            margin-bottom: 5px;
        }
        .log-info {
            color: #4fc3f7;
        }
        .log-success {
            color: #81c784;
        }
        .log-error {
            color: #e57373;
        }
        .log-warn {
            color: #ffb74d;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ è½¬æ¢å™¨é›†æˆæµ‹è¯•</h1>
        
        <div class="test-runner">
            <div class="test-controls">
                <button class="btn" onclick="runAllTests()">ğŸš€ è¿è¡Œå…¨éƒ¨æµ‹è¯•</button>
                <button class="btn btn-secondary" onclick="runRandomTest()">ğŸ² éšæœºæµ‹è¯•</button>
                <button class="btn btn-success" onclick="runBasicTests()">ğŸ“‹ åŸºç¡€æµ‹è¯•</button>
                <button class="btn btn-danger" onclick="runComplexTests()">âš¡ å¤æ‚æµ‹è¯•</button>
                <button class="btn btn-secondary" onclick="clearResults()">ğŸ”„ æ¸…ç©ºç»“æœ</button>
            </div>

            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>

            <div class="stats">
                <div class="stat-item">
                    <div class="stat-number" id="total-count">0</div>
                    <div class="stat-label">æ€»æµ‹è¯•</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="success-count">0</div>
                    <div class="stat-label">æˆåŠŸ</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="failed-count">0</div>
                    <div class="stat-label">å¤±è´¥</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="success-rate">0%</div>
                    <div class="stat-label">æˆåŠŸç‡</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="avg-time">0ms</div>
                    <div class="stat-label">å¹³å‡è€—æ—¶</div>
                </div>
            </div>

            <div class="log-console" id="log-console">
                <div class="log-entry log-info">ğŸ”§ è½¬æ¢å™¨é›†æˆæµ‹è¯•ç³»ç»Ÿå·²å‡†å¤‡å°±ç»ª</div>
                <div class="log-entry log-info">ğŸ’¡ ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®å¼€å§‹æµ‹è¯•</div>
            </div>
        </div>

        <div class="results-grid" id="results-grid">
            <!-- æµ‹è¯•ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ -->
        </div>
    </div>

    <script>
        // æµ‹è¯•æ•°æ®
        const testCases = [
            {
                id: 'simple-text',
                name: 'ç®€å•æ–‡æœ¬',
                category: 'basic',
                xml: `<TextView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Hello World"
    android:textSize="18sp" />`,
                expectedKeywords: ['Text', 'Hello World', '18.sp']
            },
            {
                id: 'basic-linear-layout',
                name: 'åŸºç¡€çº¿æ€§å¸ƒå±€',
                category: 'basic',
                xml: `<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">
    
    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="æ ‡é¢˜" />
        
    <Button
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="ç‚¹å‡»æˆ‘" />
        
</LinearLayout>`,
                expectedKeywords: ['Column', 'Text', 'Button', 'æ ‡é¢˜', 'ç‚¹å‡»æˆ‘']
            },
            {
                id: 'horizontal-layout',
                name: 'æ°´å¹³å¸ƒå±€',
                category: 'basic',
                xml: `<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal">
    
    <ImageView
        android:layout_width="48dp"
        android:layout_height="48dp"
        android:src="@drawable/icon" />
        
    <TextView
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="ç”¨æˆ·å" />
        
</LinearLayout>`,
                expectedKeywords: ['Row', 'Image', 'Text', 'ç”¨æˆ·å']
            },
            {
                id: 'form-layout',
                name: 'è¡¨å•å¸ƒå±€',
                category: 'complex',
                xml: `<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:padding="16dp">
    
    <EditText
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:hint="è¯·è¾“å…¥ç”¨æˆ·å" />
    
    <EditText
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:hint="è¯·è¾“å…¥å¯†ç "
        android:inputType="textPassword" />
    
    <Button
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="ç™»å½•"
        android:background="#007AFF" />
        
</LinearLayout>`,
                expectedKeywords: ['Column', 'OutlinedTextField', 'Button', 'è¯·è¾“å…¥ç”¨æˆ·å', 'è¯·è¾“å…¥å¯†ç ', 'ç™»å½•']
            },
            {
                id: 'recyclerview-layout',
                name: 'RecyclerView å¸ƒå±€',
                category: 'complex',
                xml: `<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="å•†å“åˆ—è¡¨"
        android:textSize="20sp"
        android:padding="16dp" />

    <androidx.recyclerview.widget.RecyclerView
        android:id="@+id/recycler_view"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1" />

</LinearLayout>`,
                expectedKeywords: ['Column', 'Text', 'LazyColumn', 'å•†å“åˆ—è¡¨']
            },
            {
                id: 'constraint-layout',
                name: 'çº¦æŸå¸ƒå±€',
                category: 'complex',
                xml: `<androidx.constraintlayout.widget.ConstraintLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <TextView
        android:id="@+id/title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="çº¦æŸå¸ƒå±€ç¤ºä¾‹"
        android:textSize="24sp"
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent" />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="ç¡®å®š"
        app:layout_constraintTop_toBottomOf="@id/title"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent" />

</androidx.constraintlayout.widget.ConstraintLayout>`,
                expectedKeywords: ['Box', 'Text', 'Button', 'çº¦æŸå¸ƒå±€ç¤ºä¾‹', 'ç¡®å®š']
            },
            {
                id: 'card-layout',
                name: 'CardView å¸ƒå±€',
                category: 'complex',
                xml: `<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:padding="16dp">

    <androidx.cardview.widget.CardView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        app:cardCornerRadius="8dp"
        app:cardElevation="4dp">

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:padding="16dp">

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="å¡ç‰‡æ ‡é¢˜"
                android:textSize="18sp"
                android:textStyle="bold" />

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="è¿™æ˜¯å¡ç‰‡å†…å®¹"
                android:textSize="14sp" />

        </LinearLayout>

    </androidx.cardview.widget.CardView>

</LinearLayout>`,
                expectedKeywords: ['Column', 'Card', 'Text', 'å¡ç‰‡æ ‡é¢˜', 'è¿™æ˜¯å¡ç‰‡å†…å®¹']
            }
        ];

        let testResults = [];
        let isRunning = false;

        // æ—¥å¿—åŠŸèƒ½
        function log(message, type = 'info') {
            const console = document.getElementById('log-console');
            const entry = document.createElement('div');
            entry.className = `log-entry log-${type}`;
            
            const timestamp = new Date().toLocaleTimeString();
            const icons = {
                info: 'â„¹ï¸',
                success: 'âœ…',
                error: 'âŒ',
                warn: 'âš ï¸'
            };
            
            entry.textContent = `[${timestamp}] ${icons[type] || ''} ${message}`;
            console.appendChild(entry);
            console.scrollTop = console.scrollHeight;
        }

        // æ›´æ–°è¿›åº¦æ¡
        function updateProgress(current, total) {
            const percentage = (current / total) * 100;
            document.getElementById('progress-fill').style.width = `${percentage}%`;
        }

        // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
        function updateStats() {
            const total = testResults.length;
            const success = testResults.filter(r => r.success).length;
            const failed = total - success;
            const successRate = total > 0 ? Math.round((success / total) * 100) : 0;
            const avgTime = total > 0 ? Math.round(testResults.reduce((sum, r) => sum + (r.duration || 0), 0) / total) : 0;

            document.getElementById('total-count').textContent = total;
            document.getElementById('success-count').textContent = success;
            document.getElementById('failed-count').textContent = failed;
            document.getElementById('success-rate').textContent = `${successRate}%`;
            document.getElementById('avg-time').textContent = `${avgTime}ms`;
        }

        // æ¸²æŸ“æµ‹è¯•ç»“æœ
        function renderResults() {
            const grid = document.getElementById('results-grid');
            grid.innerHTML = '';

            testResults.forEach(result => {
                const card = document.createElement('div');
                card.className = `result-card ${result.success ? 'success' : 'failed'}`;
                
                card.innerHTML = `
                    <div class="result-header">
                        <div class="result-title">${result.name}</div>
                        <div class="result-status status-${result.success ? 'success' : 'failed'}">
                            ${result.success ? 'é€šè¿‡' : 'å¤±è´¥'}
                        </div>
                    </div>
                    
                    <div style="font-size: 12px; color: #666; margin-bottom: 10px;">
                        è€—æ—¶: ${result.duration}ms | ç±»åˆ«: ${result.category}
                    </div>
                    
                    <div style="font-size: 13px; font-weight: 600; margin-bottom: 8px;">XML è¾“å…¥:</div>
                    <div class="code-block xml-code">${escapeHtml(result.xml.substring(0, 200))}${result.xml.length > 200 ? '...' : ''}</div>
                    
                    <div style="font-size: 13px; font-weight: 600; margin-bottom: 8px;">Compose è¾“å‡º:</div>
                    <div class="code-block ${result.success ? 'compose-code' : 'error-code'}">
                        ${escapeHtml(result.output.substring(0, 300))}${result.output.length > 300 ? '...' : ''}
                    </div>
                    
                    ${result.error ? `
                        <div style="font-size: 13px; font-weight: 600; margin-bottom: 8px; color: #dc3545;">é”™è¯¯ä¿¡æ¯:</div>
                        <div class="code-block error-code">${escapeHtml(result.error)}</div>
                    ` : ''}
                    
                    ${result.validation && result.validation.length > 0 ? `
                        <div style="font-size: 13px; font-weight: 600; margin-bottom: 8px;">éªŒè¯ç»“æœ:</div>
                        <div style="font-size: 12px;">
                            ${result.validation.map(v => `<div>${v.found ? 'âœ…' : 'âŒ'} ${v.keyword}</div>`).join('')}
                        </div>
                    ` : ''}
                `;
                
                grid.appendChild(card);
            });
        }

        // è½¬ä¹‰ HTML
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // éªŒè¯ç»“æœ
        function validateResult(output, expectedKeywords) {
            return expectedKeywords.map(keyword => ({
                keyword,
                found: output.includes(keyword)
            }));
        }

        // è°ƒç”¨å®é™…çš„è½¬æ¢å™¨
        async function callConverter(xml) {
            try {
                // åˆ›å»ºä¸€ä¸ªéšè—çš„ iframe æ¥è°ƒç”¨è½¬æ¢å™¨
                const iframe = document.createElement('iframe');
                iframe.style.display = 'none';
                iframe.src = '/converter.html';
                document.body.appendChild(iframe);

                return new Promise((resolve, reject) => {
                    iframe.onload = () => {
                        try {
                            const converterDoc = iframe.contentDocument;
                            const xmlInput = converterDoc.getElementById('xml-input');
                            const convertBtn = converterDoc.getElementById('convert-btn');
                            const composeOutput = converterDoc.getElementById('compose-output');

                            if (!xmlInput || !convertBtn || !composeOutput) {
                                throw new Error('è½¬æ¢å™¨é¡µé¢å…ƒç´ æœªæ‰¾åˆ°');
                            }

                            // è®¾ç½®è¾“å…¥
                            xmlInput.value = xml;

                            // ç›‘å¬è½¬æ¢å®Œæˆ
                            const checkOutput = () => {
                                const output = composeOutput.textContent;
                                if (output && output.trim() && !output.includes('ç­‰å¾…è½¬æ¢')) {
                                    document.body.removeChild(iframe);
                                    resolve(output);
                                } else {
                                    setTimeout(checkOutput, 100);
                                }
                            };

                            // è§¦å‘è½¬æ¢
                            convertBtn.click();
                            setTimeout(checkOutput, 500);

                            // è¶…æ—¶å¤„ç†
                            setTimeout(() => {
                                document.body.removeChild(iframe);
                                reject(new Error('è½¬æ¢è¶…æ—¶'));
                            }, 10000);

                        } catch (error) {
                            document.body.removeChild(iframe);
                            reject(error);
                        }
                    };

                    iframe.onerror = () => {
                        document.body.removeChild(iframe);
                        reject(new Error('æ— æ³•åŠ è½½è½¬æ¢å™¨é¡µé¢'));
                    };
                });

            } catch (error) {
                throw new Error(`è°ƒç”¨è½¬æ¢å™¨å¤±è´¥: ${error.message}`);
            }
        }

        // è¿è¡Œå•ä¸ªæµ‹è¯•
        async function runSingleTest(testCase) {
            const startTime = Date.now();
            
            try {
                log(`å¼€å§‹æµ‹è¯•: ${testCase.name}`, 'info');
                
                // è°ƒç”¨è½¬æ¢å™¨
                const output = await callConverter(testCase.xml);
                const duration = Date.now() - startTime;
                
                // éªŒè¯ç»“æœ
                const validation = validateResult(output, testCase.expectedKeywords);
                const success = validation.every(v => v.found);
                
                const result = {
                    id: testCase.id,
                    name: testCase.name,
                    category: testCase.category,
                    xml: testCase.xml,
                    output: output,
                    success: success,
                    duration: duration,
                    validation: validation,
                    timestamp: new Date().toISOString()
                };
                
                testResults.push(result);
                
                if (success) {
                    log(`âœ… ${testCase.name} æµ‹è¯•é€šè¿‡ (${duration}ms)`, 'success');
                } else {
                    log(`âŒ ${testCase.name} æµ‹è¯•å¤±è´¥ (${duration}ms)`, 'error');
                }
                
                return result;
                
            } catch (error) {
                const duration = Date.now() - startTime;
                
                const result = {
                    id: testCase.id,
                    name: testCase.name,
                    category: testCase.category,
                    xml: testCase.xml,
                    output: '',
                    success: false,
                    duration: duration,
                    error: error.message,
                    timestamp: new Date().toISOString()
                };
                
                testResults.push(result);
                log(`âŒ ${testCase.name} æµ‹è¯•å¼‚å¸¸: ${error.message}`, 'error');
                
                return result;
            }
        }

        // è¿è¡Œæ‰€æœ‰æµ‹è¯•
        async function runAllTests() {
            if (isRunning) return;
            
            isRunning = true;
            testResults = [];
            log('ğŸš€ å¼€å§‹è¿è¡Œæ‰€æœ‰æµ‹è¯•...', 'info');
            
            for (let i = 0; i < testCases.length; i++) {
                updateProgress(i, testCases.length);
                await runSingleTest(testCases[i]);
                updateStats();
                renderResults();
                
                // æ·»åŠ å°å»¶è¿Ÿé¿å…è¿‡å¿«æ‰§è¡Œ
                await new Promise(resolve => setTimeout(resolve, 100));
            }
            
            updateProgress(testCases.length, testCases.length);
            isRunning = false;
            
            const successCount = testResults.filter(r => r.success).length;
            log(`ğŸ‰ æ‰€æœ‰æµ‹è¯•å®Œæˆ! æˆåŠŸ: ${successCount}/${testCases.length}`, 'success');
        }

        // è¿è¡ŒåŸºç¡€æµ‹è¯•
        async function runBasicTests() {
            if (isRunning) return;
            
            const basicTests = testCases.filter(t => t.category === 'basic');
            isRunning = true;
            testResults = [];
            
            log('ğŸ“‹ å¼€å§‹è¿è¡ŒåŸºç¡€æµ‹è¯•...', 'info');
            
            for (let i = 0; i < basicTests.length; i++) {
                updateProgress(i, basicTests.length);
                await runSingleTest(basicTests[i]);
                updateStats();
                renderResults();
                await new Promise(resolve => setTimeout(resolve, 100));
            }
            
            updateProgress(basicTests.length, basicTests.length);
            isRunning = false;
            
            const successCount = testResults.filter(r => r.success).length;
            log(`ğŸ“‹ åŸºç¡€æµ‹è¯•å®Œæˆ! æˆåŠŸ: ${successCount}/${basicTests.length}`, 'success');
        }

        // è¿è¡Œå¤æ‚æµ‹è¯•
        async function runComplexTests() {
            if (isRunning) return;
            
            const complexTests = testCases.filter(t => t.category === 'complex');
            isRunning = true;
            testResults = [];
            
            log('âš¡ å¼€å§‹è¿è¡Œå¤æ‚æµ‹è¯•...', 'info');
            
            for (let i = 0; i < complexTests.length; i++) {
                updateProgress(i, complexTests.length);
                await runSingleTest(complexTests[i]);
                updateStats();
                renderResults();
                await new Promise(resolve => setTimeout(resolve, 100));
            }
            
            updateProgress(complexTests.length, complexTests.length);
            isRunning = false;
            
            const successCount = testResults.filter(r => r.success).length;
            log(`âš¡ å¤æ‚æµ‹è¯•å®Œæˆ! æˆåŠŸ: ${successCount}/${complexTests.length}`, 'success');
        }

        // è¿è¡Œéšæœºæµ‹è¯•
        async function runRandomTest() {
            if (isRunning) return;
            
            const randomTest = testCases[Math.floor(Math.random() * testCases.length)];
            isRunning = true;
            
            log(`ğŸ² è¿è¡Œéšæœºæµ‹è¯•: ${randomTest.name}`, 'info');
            
            await runSingleTest(randomTest);
            updateStats();
            renderResults();
            
            isRunning = false;
        }

        // æ¸…ç©ºç»“æœ
        function clearResults() {
            testResults = [];
            document.getElementById('results-grid').innerHTML = '';
            document.getElementById('log-console').innerHTML = '<div class="log-entry log-info">ğŸ”„ ç»“æœå·²æ¸…ç©º</div>';
            updateStats();
            updateProgress(0, 100);
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            updateStats();
            log('ğŸ”§ é›†æˆæµ‹è¯•ç³»ç»Ÿå·²åˆå§‹åŒ–', 'info');
        });
    </script>
</body>
</html>
